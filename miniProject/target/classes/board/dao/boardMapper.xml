<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="userSQL">

	<select id="getBoardList" resultType="board">
		SELECT
		    c.channel_name,
		    b.board_text,
		    COUNT(DISTINCT l.like_id) AS like_count,
		    COUNT(DISTINCT cm.comment_id) AS comment_count,
		    b.upload_date,
		    ch.channel_profile_url,
		    u.user_id
		FROM
   		    Community_Board b
		JOIN
   			Like_count l ON b.board_id = l.board_id
		JOIN
   			Comment cm ON b.board_id = cm.board_id
		JOIN
   			Channel c ON b.channel_id = c.channel_id
		JOIN
   			Channel ch ON b.channel_id = ch.channel_id
		JOIN
   			User u ON ch.user_id = u.user_id
		WHERE
   			c.channel_id = 1 -- 수정된 부분: channel_id가 1인 것만 조회
		GROUP BY
		    c.channel_name,
		    b.board_text,
		    b.upload_date,
		    ch.channel_profile_url,
		    u.user_id;
	</select>
	
	<insert id="upload" parameterType="video.bean.VideoDTO">
		INSERT INTO Video(channel_id, video_title, video_url, video_description, thumnail_url)
		VALUES (#{channel_id}, #{video_title}, #{video_url}, #{video_description}, #{thumnail_url})
	</insert>
	
	

</mapper>